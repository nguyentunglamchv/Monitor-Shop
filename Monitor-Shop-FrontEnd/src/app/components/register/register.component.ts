import { Component, OnInit } from '@angular/core';
import { FormControl, FormGroup, Validators } from '@angular/forms';
import { Router } from '@angular/router';
import { ToastrService } from 'ngx-toastr';
import { Customer } from 'src/app/common/Customer';
import { CustomerService } from 'src/app/services/customer.service';
import { LocalStorageService } from 'src/app/services/local-storage.service';
import { SendmailService } from 'src/app/services/sendmail.service';
import Swal from 'sweetalert2';

@Component({
  selector: 'app-register',
  templateUrl: './register.component.html',
  styleUrls: ['./register.component.css']
})
export class RegisterComponent implements OnInit {

  url = 'data:image/jpeg;base64,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8ElF29p2dd1k/rYuh6y38H7HHeHQgZzEwiZwjTuHUmmLG69v6ou/W7Q/GEGEDOVxxNOncQ3xSVcrl2mDJ0ccTTkOQfK7s+GBuvaXfmQjkGN2RpXdXzUjXtrorJxyN9Y35eunzGdeiB8wjKzG/L3Ghc28a9uoWtvOVmN+VwuELqKXieQumpeV4CaIEbxuZjftGHuNC9t4XbqFjbzsO07WY4VoVoVoVoVoVoVoVoVoVoUKFCLAfaDQPShQoVoVoVoVoVoVoVoVoVoVoUR/k3//xAAoEQABAwQCAQQCAwEAAAAAAAABAAIRAxIgMBBAIQQTIjFBUDJCcID/2gAIAQIBAT8B/wCd3PhB4OiR3iYHIeQhVXuhe6F7oXuovJQQMju1PrXTPju1TrpHuEwnmTrZ9oGe2/YFTPbqbafbcJREawE0R3Kg8a6Y8d4iNI8od6oPzppj898o6G/X6A5hD9A5vEcxw1v6JzZxa3vBqDYThg5s8tbg0ItlFnWDSUKahHkjBzJTWR94AchRKNNFpHRAlBkZuGFGl/YqtSnyMGjMslERuAlARjGBHFCnd5PNenHyHAGEYkSiI2sEanDj05NyhQvVfjhg5GbxOwCTsK9KPM8+qHhDYRB10x50HBwXpR8Z59SPgmDAaH/euntoiG81f47amunpOFF0GOazpMYDTU108hoYZCebQj521NdP6xOJwougwqzpMYDEY1PrWCQryryryryririryryryriririririririririryryryryririryryryryiSf8AJv/EAEEQAAEBAwcJBgMFCAMAAAAAAAECAAMRICEwMTNAUQQQEiJBUGFxkRMjMlKSoUJyojRgYoHBFCRDY3BzgpBTsdH/2gAIAQEABj8C/wBevfP3aOamttL5UltR09V7N9kV62nyVXrbWdPk9GttH5hBouXiFj8J+40Hz0aXlTOWhkjoI4rnLd9lCyMIwFBFJIOIa07VOC2Cco7lfGptJJBSdo+4OnlC9HAbSxRk/cuuFZaJpe5Xq7Umpgg92/8AKdvLf+inXfmpOHNi9frKlm4RFbJcZer5Xv8A7vwvHqglArJYu8ii7d+faWioxPG5pybK1d18KvLvqJqbQdn93TUMeN2GSZQdceA48N8h0nxPpvyu4UgwUkxBYL/iJmWOO+HA2aF4doROl7qqG91LV4UiJZT14flGAvAyh5O+eCPyje+UHHV6yA/U6V2Z23XJTgmG90jF4M/bvh3SKhicxUgdk8xTUxOh2iMUU4KHcEeZUwZOkdJCvizgeVZG93P9z9MyHaPEowDIdIqSJHfOhpYiYtHJn0OC2stP5J27xCk8xL1EKVyDWJSPxzN+8PvyQ0XboFXmVPmeOtvw82ga8z8YL3u5/ufpmLw1Ox70E4bXyd16W+zj1FrNXqLWavUW+zj1FtTJ3fpaYASlw8K9YZsrHFP673Qf5mZ488y7q6fD4TA5st/w/Xe6uCxmccRG6v0bdGIzZb/h+u98p/I++Z0jypAuz135VENlR/EN75WP5ZZwjFQu6lecAs9Vi83u9BqKSG0v+NJN3yd7zSzvione+hi2Vr/maHS7qPkUCzp0fKDvdXRtX4iVXd668yWRDZvYnMLucyeW9V8rycyd6kNAsbykcN7aQqN4DcBveBqaPw43cwqxaA+582+o3WP9b4/0fjjv8tomngK2Ry3+vlm4007J3+oYjNM3GkicwBr+4E1bT5tah1WnzaSq/uFNW0+aZpw21trbW2tMGnzxVXv+EmatoGiiqvf/AGaVDS2iXxaBoIqrlh2VDSNQ3tFagBxaDqLw+zePRTglkvOrAioy+LQNcqJrlkmoMp50bx6ScFNB73Z9mihQI4bx11gMf2eOnjBovFlR4yC6VWmrlQcWga5ETXQB0mtVfKRF2sp5Mn9ojp4wbUWDuzvFgN3SSeJbxwGCZaXg2VsCKjQcWga80TXQEmYBlPDtql+OI4t3qIcQ3drB3PAnSVgG1NQcGnrkCUXSq01cqGJmhtYLBBjQhyK1V8pRkRFba+uOLQB0VYHceuZ8GgNROApUrGytgpNRoOzd+DbxaB8BaIqllSqgynh20sDrowLahnw3AUOZ1Y4NFRiaAyy5VWmqWXTs8zn0Hng/6lhymtVfKWKCKTAsEPplY434unJm2qopmqlJWNjBSajJ7N34tpwkh08/IySpVQZTw7ZVVGHT4zbFXzsXZn+I0s4aaSXKq01SFKdidp5R0vhmjIDlNaq5M7TCl7F4Z9hvRVt2MSazc0vBsYKTUc8GinwKkhIrLJQNmcqVUGU8O25gisMFbdt50R4UTU0JZcq2TiQhOAkpOBkBynbOZcKbRPhXNeFrwF2S8TsZKkVGfOvhNKQeGZSl+EVsp4dt2QvEXdCMTG7lwqsTpzqViZSMwcJrM6rutGBu8PKKeNAh4msMlaajOzw8JZGBYrVUJ2W8VtoI08MRd3vO8FwqsTpaGJlvAwcJrM6rw653d78xuEaBDxOxnWhURGW8UqoJiy3iq1UEbg7+YXdR43nRP5S9EfneUnjdjRmXGgi0ZMS0aCMsUYuq+RpDT6MnRpxSI5XV78pvcWiM8Wje3Xyi6veVGGFw0c+jcCxo3XK6vL5FohotE3x3dV0ooOFBoto0HCgNKi6lEYNano1qejWp6Nano1qejWp6Nano1qejWp6Na+zR7b6Wt/paHbfS1r7Na+zWp6Na+zWvs1r7Na+zWv0tbn0tbn0tbn0tb/S1ufS1ufS1v9LR7f6Wj2/0tb/S1v8AS1ufS1ufS1ufS1ufS1ufS1r9LWp6Nano1qejWp6Nano1qejWp6NDtT0a2PpaPb/S1r7Nano1qejWp6Nano1qejWp6Nano1qejWp6MERj/rb/AP/EACwQAAECAwYGAwADAQAAAAAAAAEAESExQSAwUWFx8BBAUIGR0aGxwWDh8ZD/2gAIAQEAAT8h/wCepWPYCdH2frC+oMIaHhelRPQPS+nglifnpnGoB/gz7tMsi5BtwE8uan4AuAwdyIxRIAtc/wCZpkBNWLzQZFoCOD/AWQw/wQibjenoiGI5NTevE8dUaDMca+SvX4ZA/cTG1JTTDkCCKQEiFEyQn17IEEOJHrYzCvJBG123ki8wsyTk8mZxCgf4HJT6yZFYA5KOTgfW4uWNDUj0dZFO2N4J8uY4IAmCESbDSmLv1jAIX3zA4D2Ax7dXPqxBsgEZYzkUcLmGHgoZvVyAJiPI1gfkN8gzw5XFX4cOr7LjHiUvTRNzKDNRR8LUahSMGd8JmvjBA28qmgRIAGjhx2SUer7TNwGQ4WsUK+W1NTYeyXtBCLfQL9Cc5eJf6TaL5wtsQznFeTJEs9s/Sm0GZj+uBiThywQxgMBYjhlm/I6vN7RcBD0+NULhtCIzinZx2BTYGgP1FUlAVZUmJqX9UiPYUNYRkGtO0G+Wnw7gOrnsMH0eGODXYDlWRR7ces68sT+cGX/tPKwrdzUERwmOrrMwHgBA4BQx/NHKkOGK/qPHWsg/B6vry+A6grVaPy+DH5v4tzTAdXnhkOoRX0vwOX8sPsIRlTXlurtoa9E7wqDbXl8ffwf1Z6d6RHq78oCxFYqTUmPL59AGtE9JG+EIx6rlQHRLknmBBo8Hb1V8z9cDi15c24e1r1XOiCISYCyKXlzhGJ4PtPqwureqaHPl4RgEUDiserkI3JNFF0Eny2MVFAXz49YAEMU6ACFOVYxiUEQBh1qVyp08HW3Ycqz59c088mzDrupDk4yr17QDLkYKgGHXhmyU+QGA6+Gxcl+Bf4lEb9fkJM/0pITRlvRvVoERIZkfh6/GJMgCAkBEURASigjdhRp0CKQnADLzrxAHKO8gPQKQgCKBIkqfmgxELgUER+ERwo8IIGUYIi4EJ4dd0riB6BSEAMeEyImMshMhMhMhf7RTJxgtLlxduicOOtyCVkD0FKIQDG5mtutZe5daICYhwGIFsDwgMiiGAxFsB4LbrWwM4HIY9WNhHUmTiHEyR2B7LQVGR7hVHDcDg2wvCFJRjAayAJgEMf8APbOGwHJRVGZ7BRMwHdaYQnFmg0Y6k/UQnmzHwhnkDgC1jssOauMDhUlGMBg4gElgEMf89w5qxjx3mQyzAwIJ4sx6Y8sjJj4UGO6ITy5aQiSS5MUcGtms4gxFUUNwODcDwqSjmAwIAkgCaHvxcFDYOSqziDAUsnFqgSC4MVL8lGmYGPVCf2RvHo7z3Jp8BfO8oiJk4jYKW08Kvch6QGEyw0ERcvBr2iYLAEUighQwvneUw9ifQ3ZlhmU+F84e9svjaqPIMRVGccTg3DkSCbF6R5vOGGaGIrkIEWzOMJyVUVQGApaL422EvkB3TszxzHQHFivSh4ceZNxHbHMV9NtyRUvri2mjMDi9IRFp7Fe3G1wChw5EQUEdOnnhywIKuQujkJTU3tK56IxFQiGOJwbL0ePYzsxph4srJDGE5KrioDAUFqXEjgCTK6OWBDUyPOMzEewML7xsFZcNU02HzwfAxROJJyZ2mquIGOw4SppstAr5xmID3hhzWkOOaKG5nJvQGJREhNbNWXHMVCOs43By4P8AJMyFieSwKdgnYJ2CdgheRGCpEvKcOJcD7MNyclVNwyFBZIgIQhEXpS2M4OaDQcBwPMupKDWt9CEhbcdHxcEdQAYcM9g2cqQonBGMCnuSc9HxcLcQSN8wkqNacxjpA1oiJCZmd6/G4neH5FQjFONh4FZMtGYYn44Haguk704ZCguG43pEARMLHSJrXl2hxmgvgBAaoxhcPW+k4E6VmYG1o0N88HjfTXBgBAAAXzw43nl2/Ci/gDzuJva7YioRcXGxdkFvPBRNWG5TOjfQUFxAPjf6vx45d96PAvyHBCIcXDxvoEyW98aU9b6S4KMIAAAX760eRy7y2PyDmRcT6zfUYJzk7X3tmhY0uyn1D6DC4YzOQcex+WKzkI3UBFE4HKyYhk/i4MQ5K2MA5O4NgQhZJw5KILrKQDyxu8AjM3RtponC1nIXBBhRCGFbIjUEQ5VuM4G0TEjfTuhMI3eI5UneH1XZRo4Wdt8FKXE0u1mWHe4bBSts4GaJxuyc4j9cqbvc12cOqOMZW4vUXBBhRCHU4gOVEY5VuIvU2zgGSOLW7N3ublTbVi7oo2uBywMrieXbjLDvcMeAncG6KN2b6PlTbTH3dnAMkTAbjWhK4MMKIA6iAcqIh5huNaM7iIiji0uzfTP3ypN2vu7KPgT6dxqS4nlqFLDU3GlLgm0uBsN2T9775V8Y5BcBbL7Wy+1svtbL7Wy+1svtbL7Wy+1svtZ3fVFbsdqrObaqMw7ZrP76rP76rZfaz++qz++qz++qz++qYj9tVvHtbx7W4e1nNtVuHtbh7Wc21QhAUNqoRiKO1VnNtVnNtVvHtbx7W8e1vHtbx7Tcftqt19rZfa2X2tl9rZfa2X2tl9qE1wsC3IbVWf31Wy+1svtbL7Wy+1svtbL7Wy+1svvhGjOSXb/m3//aAAwDAQACAAMAAAAQMcsgc88888888888888888888888888888888888084AA48808s88c8s88c8McsM8McsM8McsM8McsM8840ccEIIMEww4w0ww4w0004480044800448004488o888css8cAooUUAooUUAcoE8AcoE8AcoE8AcoE88oc88MMsMcEQoI0EQoI0AksccMssccMssccMsscc84888AAAAAcIMsEcMkc888c8088888888888888888888gAQAA0U4o4s88888888sY888888888888888sc88AAAAAEAgIE8888888888o088888888888888s888IAEAA8k84U88888888888c888888888888884088AAAAAQQog89388888881808888888888888084AYAAAAAIcMAdCBBzWw27SoiU8888888888888088ssQAAgAMMEIiNtFdJNBhBBwE88c8s88c8s88c888gkAAAAAwUQghBBBBBBBBBBW08888888888888c8sIoEAAIAgwwQyBJBFBBBBBBCY8808488084880c8844AAAAA80ULzxxxxxBBBBBH88888888888888084AYAAAAAIcM4LBBBBBBBBJBKs8888888888888088ssQAAgAMMEaqNtFdJNBhBBD188c8s88c8s88c888gkAAAAAwUQgcBBBBBBBBBB288888888888888c8sIoEAAIAgwwQzPJBFBBBBBGh48808488084880c8844AAAAA80U4o05xxxBBBB2888888888888888EU88I4480088M8sQX9599996D888888888888888kU88s8888888888r5+999940g888888888888888AU88w8888888w840cFR3/wDSB/PPPPPPPPPPPPPPPGFPPKLLPHHPPPPJPPLt/wD/ALN88M88888888888888QU888888888xSvO888r/AP5PPPDH8tfPPPPPPPPPPBFPPCOOPMEqcPP7XfPPCffPPLXf/IJQPPPPPPPPPJFPPLPPNggww3P/AN7zzwzr3zy//wDsDDTCa8888888AU88w8sjDDDDQ4/998g+8/8APf8A/SAMMMMMzzzzzzxhTzyiysMMMMMMf/8AP4AMPAYP/wDyQwwwww49PPPPPEFPPPLYwwwwwxvv/wD+brzynr//AP8Aywwwwww3PPPPPBFPPCLQwwwwww8//wD93fzz+3//APzDDDDDDD188888kU88sBDDDDDLDG+//wDfPPL/AP8A/wDywxwwwww6fPPPPAFPPMMgwww0ggw9/wD/APp88F//AP8AsMMKIMMMNDzzzzxhTzyisMMMNKAMNL7/AP8AHLHP/wD+MMMGAMMMNHzzzzxBTzzyMMMMNX8MMPf/AP8A/HP/AP8ArDDDfJDDDDT88888EU88IoIcEEdtMMMM/f8A6UX/AP8AsMMMPNMMMM888888kU88s88888888888888888888888888888888888AU88w8888888w8408w8488888888888888888888YU88oss8cc888888888888888888888888888888QU88888888888888888888888888888888888888/8QAJBEBAAIBBQEAAgIDAAAAAAAAAQARIRAgMDFBQFGxUGFw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';

  postForm: FormGroup;
  user!: Customer;
  data!: any;

  constructor(private userService: CustomerService, private toastr: ToastrService, private sendMailService: SendmailService,
    private localStorageService: LocalStorageService, private router: Router) {
    this.postForm = new FormGroup({
      'userId': new FormControl(0.0),
      'name': new FormControl(null, [Validators.required, Validators.minLength(6)]),
      'email': new FormControl(null, Validators.required),
      'password': new FormControl(null, [Validators.required, Validators.minLength(6)]),
      'address': new FormControl(null, Validators.required),
      'phone': new FormControl(null, [Validators.required, Validators.pattern('(0)[0-9]{9}')]),
      'gender': new FormControl(true),
      'registerDate': new FormControl(new Date),
      'status': new FormControl(true),
      'role': new FormControl(false),
      'otp': new FormControl(null, Validators.required)
    })
  }

  ngOnInit(): void {
    this.checkLogin();
  }


  checkLogin() {
    this.user = this.localStorageService.getUser();
    if (this.user != null) {
      this.router.navigate(['/home-page']);
    }
  }

  register() {
    if (this.postForm.valid) {
      this.data = localStorage.getItem("otp");
      if (this.postForm.value.otp == JSON.parse(this.data)) {
        this.user = this.postForm.value;
        this.user.image = this.url;
        this.userService.signIn(this.user).subscribe(data => {
          Swal.fire({
            icon: 'success',
            title: 'Đăng kí thành công!',
            showConfirmButton: false,
            timer: 1500
          })
          window.localStorage.removeItem("otp");
          window.location.href = '/';
        }, error => {
          this.toastr.error('Đăng kí thất bại ! Hãy thử lại', 'Hệ thống');
        })
      } else {
        this.toastr.error('Mã OTP không đúng, hãy kiểm tra lại !', 'Hệ thống');
      }
    } else {
      this.toastr.error('Hãy nhập đầy đủ thông tin !', 'Hệ thống');
    }

  }

  sendOtp() {
    this.sendMailService.sendMailOtp(this.postForm.value.email).subscribe(data => {
      window.localStorage.removeItem("otp");
      window.localStorage.setItem("otp", JSON.stringify(data));
      this.toastr.success('Chúng tôi đã gửi mã OTP về email của bạn !', 'Hệ thống');
    }, error => {
      if (error.status == 404) {
        this.toastr.error('Email này đã tồn tại trên hệ thống !', 'Hệ thống');
      } else {
        this.toastr.warning('Hãy nhập đúng email !', 'Hệ thống');
      }
    })

  }

  sendError() {
    this.toastr.warning('Hãy nhập đúng email !', 'Hệ thống');
  }

}
